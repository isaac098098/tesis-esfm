%documentclass
\documentclass[titlepage,letterpaper,twoside]{article}
%use twoside if using fancyhdr
%use titlepage to center title

%Packages

\usepackage[utf8]{inputenc} %character codification

%Layout
\usepackage[left=3.0cm,right=3.0cm,top=3.0cm,bottom=3.3cm,headheight=0.8cm,asymmetric,showframe]{geometry} %page size
%use headheight to control the distance between header and text
%use asymmetric to fix marginpar notes to one side
\usepackage{fancyhdr} %footers and headers

%Font size
\usepackage{anyfontsize}
\usepackage[fontsize=13pt]{scrextend}

%Language
\usepackage[spanish,activeacute,es-tabla]{babel} %languages
%use activeacute to directly type accents
%use es-lcroman to lowercase roman numerals
%use es-tabla to translate table to tabla instead of cuadro

%Math packages
\usepackage{amsthm} %theorem alike environmetns
\usepackage[tbtags]{amsmath} %math
%use tbtags to tag equations at the bottom
\usepackage{amssymb} %more math symbols
\usepackage{statmath} %math mode bold, use \bf[char]
\usepackage{esvect} %better vector arrows
\usepackage{leftindex} %left indexes
\usepackage{centernot} %centernot symbols

%Formatting
\usepackage[hyphens]{url} %hyperlinks in bibliography
%use hyphens to break hyperlinks
%load before hyperref
\usepackage[hidelinks]{hyperref} %clickable cross-references and url's
%use hidelinks to remove hyperlink's boxes
\usepackage[spanish]{cleveref} %reference element type
\usepackage{bookmark} %pdf bookmarks
\usepackage[nottoc]{tocbibind} %include bib, index and figure/table lists in toc automatically
%use nottoc to exclude toc in toc
\usepackage{tocloft} %toc, tof and tot formatting
%use titles option to change default toc and tof titles
%\setlength{\cftbeforesecskip}{6pt} %space before section in toc
%\setlength{\cftbeforesubsecskip}{2pt} %vertical space before subsection in toc
%\setlength{\cftbeforesubsubsecskip}{2pt} %vertical space before subsubsection in toc
\usepackage{titlesec} %custom sections title format
\usepackage{enumitem} %lists formatting
\usepackage{caption} %figure and table captions
\usepackage{float} %floats positioning, [H] option
%\usepackage[tocskip=2pt]{parskip} %paragraph separation
%use tocskip to add space in toc
\usepackage{libertine}
\usepackage[libertine]{newtxmath}

% Bibliography and cites
\usepackage{natbib}

% Diagrams and plots
\usepackage{tikz}
\usepackage{pgfplots} %advanced data plotting

%Tables
\usepackage{array} %math arrays
\usepackage{fancyhdr} %headers
%\usepackage{booktabs} %book tables
%\usepackage{cellspace} %vertical table spacing
%use
%\setlength\cellspacetoplimit{0pt}
%\setlength\cellspacebottomlimit{0pt}
%\usepackage{multirow} %multiple row cells

%Other
%\usepackage{lipsum}
%\usepackage{relsize} %relative text resizing
\usepackage{scalerel} %relative math text resizing
\usepackage{xcolor}

%Preamble

%Formatting
\decimalpoint %decimal point
\renewcommand\qedsymbol{$\blacksquare$} %black filled qed symbol
\numberwithin{equation}{section} %equation numbered by section
\pgfplotsset{compat=1.18} %plot style
%\pgfplotsset{compat=1.18,ytick style={draw=none},xtick style={draw=none},width=9.0cm,height=8.3cm} %plot style
\hypersetup{breaklinks=true} %hyperref, allow hyperlinks to break
%\setlength{\textfloatsep}{0.1cm} %vertical spacing between floats and text
\allowdisplaybreaks %allow equations to break across pages
\linespread{1} %vertical spacing between lines, relative

%Layout

\setlength\parindent{0pt} %paragraph indentation
%\setlength\columnsep{0.5cm} %horizontal column separation
%\setlength{\parskip}{0.35cm} %vertical paragraph separation
\renewcommand{\headruleskip}{1mm} %distance between header ruler and header text

%Section formatting, depends on titlesec

\titlespacing*{\section}{0cm}{0.7cm}{0.7cm}
\titlespacing*{\subsection}{0em}{0.7cm}{0.7cm}
%use * to apply to all instances
%\titlespacing*{sec}{left spacing}{above spacing}{below spacing}

%\titleformat{\section}{\centering\large\scshape}{\thesection.}{0.5em}{}
\titleformat{\section}{\Large}{\thesection.}{0.5em}{}
%\titleformat{\subsection}{\centering\normalsize\scshape}{\thesubsection.}{0.5em}{}
\titleformat{\subsection}{\large}{\thesubsection.}{0.5em}{}
%titleformat{sec}{format}{number format}{number to title spacing}{prenote (between number and title)}
\renewcommand{\thesection}{\arabic{section}} %section number format
%\renewcommand{\thesection}{\normalfont\Roman{section}} %subsection number format
%\renewcommand{\thesubsection}{\Roman{section}.\arabic{subsection}} %subsection number format
\renewcommand{\thesubsection}{\arabic{section}.\arabic{subsection}} %subsection number format

%toc
%does not affect section titles in the document body

\addto{\captionsspanish}{\renewcommand{\contentsname}{Índice general \vspace{0.5cm}}} %babel, toc title format
%use addto to add title to spanish title definitions
%use captionenglish otherwise
\renewcommand{\cfttoctitlefont}{\Large} %toc title format
\renewcommand{\cftsecfont}{\bfseries} %section entry format
\renewcommand{\cftsecpagefont}{} %section entry number format
\renewcommand{\cftsubsecpagefont}{} %subsection entry number format
\renewcommand{\cftsecleader}{\cftdotfill{\cftdotsep}} %dot leaders (dot lines)
\renewcommand{\cftsecaftersnum}{.} %dot after section number
\renewcommand{\cftsubsecaftersnum}{.} %dot after subsection number
%\renewcommand{\cftsecnumwidth}{0pt} %horizontal space after section number
%\renewcommand{\cftsubsecnumwidth}{0pt} %horizontal space after subsection number
%\renewcommand{\cftsecafterpnum}{\vskip0pt} %vertical spacing between sections
%\renewcommand{\cftsecafterpnum}{\vskip0pt} %vertical spacing between subsections
%\addtocontents{toc}{\vspace{-0.5cm}} %vertical spacing after title

%Bibliography, cites and index

\setcitestyle{square,comma,numbers,sort} %natbib, 
%use square to use square brackets in citations
%use comma to use commas in multiple citations
%use numbers to change to number citation format
%use sort to sort citations in alphabetical order

%\addto{\captionsspanish}{\renewcommand{\bibname}{Bibliografía}} %babel, biblatex, changes bib section title
\addto{\captionsspanish}{\renewcommand{\refname}{Bibliografía}} %babel, bibtex, changes bib section title

%\makeatletter %deprecated
%\def\adjustpenalty{\@beginparpenalty\@M \@itempenalty\@M}
%\makeatother 

%Pagestyles, depends on fancyhdr

%section only header, use \leftmark
%\renewcommand{\sectionmark}[1]{\markboth{\scshape{#1}}{}}

%section and number header, use \leftmark
%\renewcommand{\sectionmark}[1]{\markboth{\thesection.\enskip\scshape{#1}}{}}

%section and subsection header, use \rightmark
\renewcommand{\sectionmark}[1]{\markright{\thesection.\enskip\scshape{#1}}{}}
\renewcommand{\subsectionmark}[1]{\markright{\thesubsection.\enskip\scshape{#1}}{}}

\makeindex

%pagestyles

\fancypagestyle{title-subsection}{
	\fancyhf{} %clear footer and header
	\fancyheadoffset{0.5cm} %fancyhdr, left and right header offset
	\fancyhead[LO]{\hspace{0.8cm}\small\scshape\nouppercase\notestitle} %left odd
	\fancyhead[RO]{\small\thepage\hspace{0.8cm}} %right odd
	\fancyhead[LE]{\hspace{0.8cm}\small\thepage} %left even
	\fancyhead[RE]{\small\scshape\nouppercase\rightmark\hspace{0.8cm}} %right even
}

\fancypagestyle{plain}{
	\fancyhf{} %clear footer and header
	\renewcommand{\headrulewidth}{0pt} %hide header ruler
	\cfoot{\thepage} %footer
}

%Boxes
\setlength\fboxsep{8pt}
\setlength\fboxrule{0.7pt}

%Metadata, depends on hyperref
\title{\Huge\scshape\notestitle}
\date{\today}
\author{\normalsize\notesprof \\ \normalsize\notesauthor}
\date{}

%\hypersetup{
	%pdftitle={},
	%pdfsubject={},
	%pdfauthor={},
	%pdfkeywords={}
%}

%Symbol resizing, depends on scalerel

\let\oldcap\cap
\renewcommand{\cap}{\mathbin{\scaleobj{1.1}{\oldcap}}}
\let\oldcup\cup
\renewcommand{\cup}{\mathbin{\scaleobj{1.1}{\oldcup}}}

\let\oldpartial\partial
\renewcommand{\partial}{\mathbin{\scaleobj{1.15}{\oldpartial}}}

\let\oldsubset\subset
\renewcommand{\subset}{\mathbin{\scaleobj{1.1}{\oldsubset}}}
\let\oldsubseteq\subseteq
\renewcommand{\subseteq}{\mathbin{\scaleobj{1.1}{\oldsubseteq}}}

\let\oldsupset\supset
\renewcommand{\supset}{\mathbin{\scaleobj{1.1}{\oldsupset}}}
\let\oldsupseteq\supseteq
\renewcommand{\supseteq}{\mathbin{\scaleobj{1.1}{\oldsupseteq}}}

%Theorem-like environments

\newtheoremstyle{theorem}
{\topsep} %Separación superior
{\topsep} %Separación inferior
{\itshape} %Fuente del cuerpo
{0em} %Sangría
{\bfseries} %Fuente del encabezado
{.} %Puntuación después del encabezado
{0.5em} %Espacio después del encabezado
{\thmname{#1}\thmnumber{ #2}\textnormal{\thmnote{ (#3)}}} %Teorema [número] [nombre]
\theoremstyle{theorem}
\newtheorem{theorem}{Teorema}[section]

\newtheoremstyle{proposition}
{\topsep} %Separación superior
{\topsep} %Separación inferior
{\itshape} %Fuente del cuerpo
{0em} %Sangría
{\bfseries} %Fuente del encabezado
{.} %Puntuación después del encabezado
{0.5em} %Espacio después del encabezado
{\thmname{#1}\thmnumber{ #2}\textnormal{\thmnote{ (#3)}}} %Proposición [número] [nombre]
\theoremstyle{proposition}
\newtheorem{proposition}{Proposición}[section]

\newtheoremstyle{corollary}
{\topsep} %Separación superior
{\topsep} %Separación inferior
{\itshape} %Fuente del cuerpo
{0em} %Sangría
{\bfseries} %Fuente del encabezado
{.} %Puntuación después del encabezado
{0.5em} %Espacio después del encabezado
{\thmname{#1}\thmnumber{ #2}\textnormal{\thmnote{ (#3)}}} %Corolario[número] [nombre]
\theoremstyle{corollary}
\newtheorem{corollary}{Corolario}[section]

\newtheoremstyle{lemma}
{\topsep} %Separación superior
{\topsep} %Separación inferior
{\itshape} %Fuente del cuerpo
{0em} %Sangría
{\bfseries} %Fuente del encabezado
{.} %Puntuación después del encabezado
{0.5em} %Espacio después del encabezado
{\thmname{#1}\thmnumber{ #2}\textnormal{\thmnote{ (#3)}}} %Lema [número] [nombre]
\theoremstyle{lemma}
\newtheorem{lemma}{Lema}[section]

\newtheoremstyle{definition}
{\topsep} %Separación superior
{\topsep} %Separación inferior
{\itshape} %Fuente del cuerpo
{0em} %Sangría
{\bfseries} %Fuente del encabezado
{.} %Puntuación después del encabezado
{0.5em} %Espacio después del encabezado
{\thmname{#1}\thmnumber{ #2}\textnormal{\thmnote{. (#3)}}} %Definición [número] [nombre]
\theoremstyle{definition}
\newtheorem{definition}{Definición}[section]

\newtheoremstyle{remark}
{\topsep} %Separación superior
{\topsep} %Separación inferior
{\rmfamily} %Fuente del cuerpo
{0em} %Sangría
{\itshape} %Fuente del encabezado
{.} %Puntuación después del encabezado
{0.5em} %Espacio después del encabezado
{\thmname{#1}\thmnumber{ #2}\textnormal{\thmnote{ (#3)}}} %Observación [número] [nombre]
\theoremstyle{remark}
\newtheorem{remark}{Observación}[section]

\newtheoremstyle{exercise}
{\topsep} %Separación superior
{\topsep} %Separación inferior
{\rmfamily} %Fuente del cuerpo
{0em} %Sangría
{\scshape} %Fuente del encabezado
{.} %Puntuación después del encabezado
{0.5em} %Espacio después del encabezado
{\thmname{#1}\thmnumber{ #2}\textnormal{\thmnote{ (#3)}}} %Ejercicio [número] [nombre]
\theoremstyle{exercise}
\newtheorem{exercise}{Ejercicio}[section]

\newtheoremstyle{example}
{\topsep} %Separación superior
{\topsep} %Separación inferior
{\rmfamily} %Fuente del cuerpo
{0em} %Sangría
{\scshape} %Fuente del encabezado
{.} %Puntuación después del encabezado
{0.5em} %Espacio después del encabezado
{\thmname{#1}\thmnumber{ #2}\textnormal{\thmnote{ (#3)}}} %Ejemplo [número] [nombre]
\theoremstyle{example}
\newtheorem{example}{Ejemplo}[subsection]

%Lectures
\newcommand{\seclecture}[2]{
	\section{#1}
    \marginpar{\footnotesize\textsf{\mbox{#2}}}
}
\newcommand{\sublecture}[2]{
	\subsection{#1}
    \marginpar{\footnotesize\textsf{\mbox{#2}}}
}

%Macros

\newcommand{\Mod}[1]{\mathrm{m\acute{o}d\:}#1}

%Operators

\DeclarePairedDelimiter\bra{\langle}{\rvert}
\DeclarePairedDelimiter\ket{\lvert}{\rangle}
\DeclarePairedDelimiterX\braket[2]{\langle}{\rangle}{#1\,\delimsize\vert\,\mathopen{}#2}

%Trigonometric functions

\DeclareMathOperator{\arccot}{arccot}
\DeclareMathOperator{\arcsec}{arcsec}
\DeclareMathOperator{\arccsc}{arccsc}
\DeclareMathOperator{\sech}{sech}
\DeclareMathOperator{\csch}{csch}
\DeclareMathOperator{\arcsinh}{arcsinh}
\DeclareMathOperator{\arccosh}{arccosh}
\DeclareMathOperator{\arctanh}{arctanh}
\DeclareMathOperator{\arccoth}{arccoth}
\DeclareMathOperator{\arcsech}{arcsech}
\DeclareMathOperator{\arccsch}{arccsch}

%Logic

\let\oldforall\forall
\renewcommand{\forall}{\oldforall\,}
\let\oldexists\exists
\renewcommand{\exists}{\:\oldexists\:}
\let\oldnexists\nexists
\renewcommand{\nexists}{\:\oldnexists\:}

%Sets and inclusion

\newcommand{\std}{\, : \,}

%Derivatives

\newcommand{\dx}{\,\text{d}}
\newcommand{\dr}{\text{d}}
\newcommand{\der}[2]{\frac{\dr#1}{\dr#2}}
\newcommand{\Der}[2]{\frac{\dr}{\dr#2}#1}
\newcommand{\ndr}[3]{\frac{\dr^{#1}#2}{\dr#3^{#1}}}
\newcommand{\Ndr}[3]{\frac{\dr^{#1}}{\dr#3^{#1}}#2}
\newcommand{\pdr}[2]{\frac{\partial#1}{\partial#2}}
\newcommand{\Pdr}[2]{\frac{\partial}{\partial#2}#1}
\newcommand{\npd}[3]{\frac{\partial^{#1}#2}{\partial#3^{#1}}}
\newcommand{\Npd}[3]{\frac{\partial^{#1}}{\partial#3^{#1}}#2}
\newcommand{\evl}[1]{\mathrel{\bigg|_{#1}}}
